# 🚀 ベータテスト環境セットアップガイド

## 現在の状況
- **ステータス**: モックアップ（デモ環境）
- **データ**: ダミーデータのみ
- **認証**: 無効化されている
- **データ保存**: なし（リロードで消える）

## ベータテスト環境への移行ステップ

### フェーズ1: 最小限の本番化（1-2日）
優先度の高い基本機能を実装

#### 1. データベース接続を有効化
```javascript
// App.tsx の変更
const USE_DUMMY_DATA = false // 本番データを使用
```

#### 2. Supabaseのセットアップ
```bash
# 既存の認証情報を使用
# frontend/.env.production に設定済み
```

#### 3. 基本的な認証システム
- [ ] ログイン機能を有効化
- [ ] 簡易的なユーザー登録（招待制）
- [ ] パスワードリセット機能

#### 4. データ永続化の実装
- [ ] 顧客情報の保存/読み込み
- [ ] 予約データの保存/読み込み
- [ ] メッセージ履歴の保存

### フェーズ2: ベータテスト準備（2-3日）

#### 1. セキュリティ強化
- [ ] APIキーの環境変数化
- [ ] CORS設定
- [ ] レート制限

#### 2. ベータテスター管理
```typescript
// テスター用アカウント作成
const betaTesters = [
  { email: "tester1@salon.com", role: "beautician" },
  { email: "tester2@salon.com", role: "beautician" },
  // ... 20人分
];
```

#### 3. フィードバック機能
- [ ] アプリ内フィードバックボタン
- [ ] エラーレポート自動送信
- [ ] 使用状況分析

### フェーズ3: ベータテスト実施（1週間）

#### 1. テスター向けドキュメント
- [ ] 操作マニュアル
- [ ] よくある質問
- [ ] フィードバック方法

#### 2. モニタリング体制
- [ ] エラー監視（Sentry等）
- [ ] パフォーマンス監視
- [ ] データバックアップ（日次）

## 実装優先順位

### 必須機能（ベータテスト開始前）
1. **ユーザー認証**
   - ログイン/ログアウト
   - セッション管理

2. **データ保存**
   - 顧客情報CRUD
   - 予約情報CRUD

3. **基本的なセキュリティ**
   - HTTPS通信
   - 入力値検証

### あると良い機能
1. **通知機能**
   - 予約リマインダー
   - メッセージ通知

2. **レポート機能**
   - 売上集計
   - 顧客分析

## クイックスタート実装

### ステップ1: ダミーデータモードを解除
```bash
cd frontend
# App.tsxを編集
# USE_DUMMY_DATA = false に変更
```

### ステップ2: Supabaseテーブル作成
```sql
-- 既存のschema.sqlを使用
cd supabase
psql -h your-supabase-url -U postgres -f schema.sql
```

### ステップ3: 環境変数設定
```bash
# Vercelダッシュボードで設定
VITE_ENABLE_LOGIN=true
VITE_API_URL=https://your-api-url
```

### ステップ4: デプロイ
```bash
npm run safe-deploy
```

## 推定作業時間

| タスク | 時間 | 優先度 |
|--------|------|--------|
| データベース接続 | 4時間 | 高 |
| 認証システム | 8時間 | 高 |
| データ永続化 | 8時間 | 高 |
| セキュリティ対策 | 4時間 | 中 |
| ドキュメント作成 | 4時間 | 中 |
| **合計** | **28時間** | - |

## リスクと対策

### リスク1: データ損失
**対策**: 
- 自動バックアップ設定
- テスト環境と本番環境の分離

### リスク2: セキュリティ問題
**対策**:
- 最小権限の原則
- APIレート制限
- ログ監視

### リスク3: パフォーマンス問題
**対策**:
- 段階的なユーザー追加
- キャッシュ戦略
- CDN活用

## 次のアクション

1. **すぐに実行可能**:
   ```bash
   # ベータ環境用ブランチ作成
   git checkout -b beta-test-environment
   ```

2. **データベース接続テスト**:
   ```bash
   # Supabaseクライアントのテスト
   npm run test:db-connection
   ```

3. **最小限の認証実装**:
   - メールアドレス + パスワード
   - セッション管理
   - ログアウト機能

---

**推奨**: まずはフェーズ1の実装から始めて、3-5人の内部テスターで動作確認後、20人のベータテスターに展開することをお勧めします。