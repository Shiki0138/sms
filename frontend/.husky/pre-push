#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Pre-push hook
echo "ğŸ” ãƒ—ãƒƒã‚·ãƒ¥å‰ã®è‡ªå‹•ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œä¸­..."

# pre-deploy-check.shãŒå­˜åœ¨ã™ã‚‹å ´åˆã¯å®Ÿè¡Œ
if [ -f "frontend/scripts/pre-deploy-check.sh" ]; then
    cd frontend && ./scripts/pre-deploy-check.sh
    if [ $? -ne 0 ]; then
        echo "âŒ ãƒ‡ãƒ—ãƒ­ã‚¤å‰ãƒã‚§ãƒƒã‚¯ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒ—ãƒƒã‚·ãƒ¥ã‚’ä¸­æ­¢ã—ã¾ã™ã€‚"
        exit 1
    fi
elif [ -f "scripts/pre-deploy-check.sh" ]; then
    ./scripts/pre-deploy-check.sh
    if [ $? -ne 0 ]; then
        echo "âŒ ãƒ‡ãƒ—ãƒ­ã‚¤å‰ãƒã‚§ãƒƒã‚¯ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒ—ãƒƒã‚·ãƒ¥ã‚’ä¸­æ­¢ã—ã¾ã™ã€‚"
        exit 1
    fi
fi

echo "âœ… ã™ã¹ã¦ã®ãƒã‚§ãƒƒã‚¯ã‚’ãƒ‘ã‚¹ã—ã¾ã—ãŸã€‚ãƒ—ãƒƒã‚·ãƒ¥ã‚’ç¶šè¡Œã—ã¾ã™ã€‚"