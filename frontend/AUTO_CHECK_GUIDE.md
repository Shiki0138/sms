# 🤖 自動チェックシステムガイド

## 概要
デプロイ前チェックと安全なデプロイが自動実行される仕組みを構築しました。

## 🚀 自動実行される場面

### 1. コミット時（pre-commit）
```bash
git commit -m "your message"
```
**自動実行内容**:
- TypeScriptの構文チェック（高速）
- エラーがあればコミットを中止

### 2. プッシュ時（pre-push）
```bash
git push
```
**自動実行内容**:
- 完全なデプロイ前チェック（`pre-deploy-check.sh`）
- すべてのテストをパス後にプッシュ

### 3. GitHub Actions（プッシュ/PR時）
- mainブランチへのプッシュ時
- プルリクエスト作成時
**自動実行内容**:
- CI環境での完全チェック
- ビルドテスト

## 📝 手動実行方法

### npmスクリプト経由（推奨）
```bash
# デプロイ前チェック
npm run check

# 安全なデプロイ
npm run safe-deploy
```

### 直接実行
```bash
# デプロイ前チェック
./scripts/pre-deploy-check.sh

# 安全なデプロイ
./scripts/safe-deploy.sh
```

## 🔧 自動チェックの無効化（一時的）

### Git hooksをスキップ
```bash
# コミット時のチェックをスキップ
git commit --no-verify -m "message"

# プッシュ時のチェックをスキップ
git push --no-verify
```

⚠️ **注意**: チェックをスキップする場合は、手動で確認することを推奨

## 🛠️ カスタマイズ

### チェック項目の追加/削除
`scripts/pre-deploy-check.sh`を編集:
```bash
# 新しいチェックを追加
echo -e "\n📌 カスタムチェック..."
# your custom check here
```

### タイミングの変更
`.husky/`内のファイルを編集:
- `pre-commit`: コミット前
- `pre-push`: プッシュ前

## 📊 チェック結果の見方

### 成功時
```
✅ すべてのチェックをパスしました！
```

### エラー時
```
❌ 1個のエラー、3個の警告があります
エラーを修正してから再度実行してください。
```

### 警告のみ
```
⚠️ 3個の警告があります
デプロイは可能ですが、警告を確認することを推奨します。
```

## 🚨 トラブルシューティング

### huskyが動作しない
```bash
# huskyを再インストール
npm run prepare
```

### 権限エラー
```bash
# スクリプトに実行権限を付与
chmod +x scripts/*.sh
chmod +x .husky/*
```

### チェックが遅い
コミット時は軽量チェックのみ実行されます。
完全チェックはプッシュ時のみです。

---

これで、エラーを事前に防ぐ自動チェックシステムが稼働します！ 🎉